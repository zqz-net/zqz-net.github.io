<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-multihost_container" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/28/multihost_container/" class="article-date">
  <time class="dt-published" datetime="2020-06-28T13:56:34.129Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/28/multihost_container/">multihost_container</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight graph"><figcaption><span>TB</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">h1_eth0---ovs_br0_h1</span><br><span class="line">ovs_br0_h1---br0_h1</span><br><span class="line">br0_h1---c1_eth0_h1</span><br><span class="line">br0_h1---c2_eth0_h2</span><br><span class="line">h2_eth0---ovs_br0_h2</span><br><span class="line">ovs_br0_h2---br0_h2</span><br><span class="line">br0_h2---c1_eth0_h2</span><br><span class="line">br0_2---c2_eth0_h2</span><br><span class="line">h3_eth0---ovs_br0_h3</span><br><span class="line">ovs_br0_h3---br0_h3</span><br><span class="line">br0_h3---c1_eth0_h3</span><br><span class="line">br0_h3---c2_eth0_h3</span><br><span class="line">gateway---h1_eth0</span><br><span class="line">gateway---h2_eth0</span><br><span class="line">gateway---h3_eth0</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/28/multihost_container/" data-id="ckbz506n80000mkx14of65cug" data-title="multihost_container" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ovs" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/28/ovs/" class="article-date">
  <time class="dt-published" datetime="2020-06-28T03:25:22.846Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/28/ovs/">ovs</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="OVS-源码剖析"><a href="#OVS-源码剖析" class="headerlink" title="OVS 源码剖析"></a>OVS 源码剖析</h1><h2 id="OVS中的关键数据结构"><a href="#OVS中的关键数据结构" class="headerlink" title="OVS中的关键数据结构"></a>OVS中的关键数据结构</h2><ol>
<li>vport.h<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">struct vport &#123;</span><br><span class="line">	struct net_device *dev; &#x2F;&#x2F;指向网络设备</span><br><span class="line">	struct datapath	*dp;    &#x2F;&#x2F;指明该端口属于哪个datapath</span><br><span class="line">	struct vport_portids __rcu *upcall_portids;</span><br><span class="line">	u16 port_no; &#x2F;&#x2F;指示该端口位于dp的port数组的哪个index</span><br><span class="line"></span><br><span class="line">	struct hlist_node hash_node;</span><br><span class="line">	struct hlist_node dp_hash_node;</span><br><span class="line">	const struct vport_ops *ops;</span><br><span class="line"></span><br><span class="line">	struct list_head detach_list;</span><br><span class="line">	struct rcu_head rcu;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">struct vport_parms &#123;</span><br><span class="line">    &#x2F;&#x2F;这些参数用于创建一个新的vport</span><br><span class="line">	const char *name; &#x2F;&#x2F;vport的名字</span><br><span class="line">	enum ovs_vport_type type; &#x2F;&#x2F;vport的类型</span><br><span class="line">	struct nlattr *options; </span><br><span class="line"></span><br><span class="line">	&#x2F;* For ovs_vport_alloc(). *&#x2F;</span><br><span class="line">	struct datapath *dp; &#x2F;&#x2F;vport属于哪个dp</span><br><span class="line">	u16 port_no; &#x2F;&#x2F;vport的端口号</span><br><span class="line">	struct nlattr *upcall_portids;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>datapath.h<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">struct datapath &#123;</span><br><span class="line">	struct rcu_head rcu;</span><br><span class="line">	struct list_head list_node;</span><br><span class="line">	struct flow_table table; &#x2F;&#x2F;流表</span><br><span class="line">	struct hlist_head *ports; &#x2F;&#x2F;端口</span><br><span class="line"></span><br><span class="line">	&#x2F;* Stats. *&#x2F;</span><br><span class="line">	struct dp_stats_percpu __percpu *stats_percpu;</span><br><span class="line"></span><br><span class="line">	&#x2F;* Network namespace ref. *&#x2F;</span><br><span class="line">	possible_net_t net;</span><br><span class="line">	u32 user_features;</span><br><span class="line">	u32 max_headroom;</span><br><span class="line"></span><br><span class="line">	&#x2F;* Switch meters. *&#x2F;</span><br><span class="line">	struct hlist_head *meters;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="OpenvSwitch-接受包的流程分析"><a href="#OpenvSwitch-接受包的流程分析" class="headerlink" title="OpenvSwitch 接受包的流程分析"></a>OpenvSwitch 接受包的流程分析</h2>要让ovs接受网卡上的数据，首先要将网卡绑定到OpenvSwitch的port上，命令如下<code>ovs-vsctl add-port br0 eth0</code>，绑定之后，每当有数据包过来时，OVS都会调用数据包的接受函数<code>int ovs_vport_receive(struct vport *, struct sk_buff *, const struct ip_tunnel_info *)</code>函数位于<code>datapath/vport.c</code>中。代码如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">int ovs_vport_receive(struct vport *vport, struct sk_buff *skb,</span><br><span class="line">		      const struct ip_tunnel_info *tun_info)</span><br><span class="line">&#123;</span><br><span class="line">	struct sw_flow_key key;</span><br><span class="line">	int error;</span><br><span class="line"></span><br><span class="line">	OVS_CB(skb)-&gt;input_vport &#x3D; vport;</span><br><span class="line">	OVS_CB(skb)-&gt;mru &#x3D; 0;</span><br><span class="line">	OVS_CB(skb)-&gt;cutlen &#x3D; 0;</span><br><span class="line">	if (unlikely(dev_net(skb-&gt;dev) !&#x3D; ovs_dp_get_net(vport-&gt;dp))) &#123;</span><br><span class="line">		u32 mark;</span><br><span class="line"></span><br><span class="line">		mark &#x3D; skb-&gt;mark;</span><br><span class="line">		skb_scrub_packet(skb, true);</span><br><span class="line">		skb-&gt;mark &#x3D; mark;</span><br><span class="line">		tun_info &#x3D; NULL;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ovs_skb_init_inner_protocol(skb);</span><br><span class="line">	skb_clear_ovs_gso_cb(skb);</span><br><span class="line">	&#x2F;* Extract flow from &#39;skb&#39; into &#39;key&#39;. *&#x2F;</span><br><span class="line">	error &#x3D; ovs_flow_key_extract(tun_info, skb, &amp;key);</span><br><span class="line">	if (unlikely(error)) &#123;</span><br><span class="line">		kfree_skb(skb);</span><br><span class="line">		return error;</span><br><span class="line">	&#125;</span><br><span class="line">	ovs_dp_process_packet(skb, &amp;key);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
数据包进入openvswitch之后，会调用函数<code>void ovs_dp_process_packet(struct sk_buff *skb, struct sw_flow_key *key)</code>，对数据包进行处理，这个函数会对数据包进行流表的匹配，然后执行相应的action，action会对数据包的一些数据域进行修改，然后再将数据包发送出去，这时候会调用vport.c的数据包发送函数<code>void ovs_vport_send(struct vport *vport, struct sk_buff *skb, u8 mac_proto)</code>，此时会把数据包发送到端口绑定的网络设备中，此时网卡驱动会将数据包的数据发送出去。</li>
</ol>
<p>ovs_dp_process_packet的源代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">void ovs_dp_process_packet(struct sk_buff *skb, struct sw_flow_key *key)</span><br><span class="line">&#123;</span><br><span class="line">	const struct vport *p &#x3D; OVS_CB(skb)-&gt;input_vport;</span><br><span class="line">	struct datapath *dp &#x3D; p-&gt;dp;</span><br><span class="line">	struct sw_flow *flow;</span><br><span class="line">	struct sw_flow_actions *sf_acts;</span><br><span class="line">	struct dp_stats_percpu *stats;</span><br><span class="line">	u64 *stats_counter;</span><br><span class="line">	u32 n_mask_hit;</span><br><span class="line"></span><br><span class="line">	stats &#x3D; this_cpu_ptr(dp-&gt;stats_percpu);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;查找flow</span><br><span class="line">	flow &#x3D; ovs_flow_tbl_lookup_stats(&amp;dp-&gt;table, key, skb_get_hash(skb),</span><br><span class="line">					 &amp;n_mask_hit);</span><br><span class="line">	if (unlikely(!flow)) &#123;</span><br><span class="line">		struct dp_upcall_info upcall;</span><br><span class="line">		int error;</span><br><span class="line"></span><br><span class="line">		memset(&amp;upcall, 0, sizeof(upcall));</span><br><span class="line">		upcall.cmd &#x3D; OVS_PACKET_CMD_MISS;</span><br><span class="line">		upcall.portid &#x3D; ovs_vport_find_upcall_portid(p, skb);</span><br><span class="line">		upcall.mru &#x3D; OVS_CB(skb)-&gt;mru;</span><br><span class="line">		error &#x3D; ovs_dp_upcall(dp, skb, key, &amp;upcall, 0);</span><br><span class="line">		if (unlikely(error))</span><br><span class="line">			kfree_skb(skb);</span><br><span class="line">		else</span><br><span class="line">			consume_skb(skb);</span><br><span class="line">		stats_counter &#x3D; &amp;stats-&gt;n_missed;</span><br><span class="line">		goto out;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ovs_flow_stats_update(flow, key-&gt;tp.flags, skb);</span><br><span class="line">	sf_acts &#x3D; rcu_dereference(flow-&gt;sf_acts);</span><br><span class="line">    &#x2F;&#x2F;执行action</span><br><span class="line">	ovs_execute_actions(dp, skb, sf_acts, key);</span><br><span class="line"></span><br><span class="line">	stats_counter &#x3D; &amp;stats-&gt;n_hit;</span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">	&#x2F;* Update datapath statistics. *&#x2F;</span><br><span class="line">	u64_stats_update_begin(&amp;stats-&gt;syncp);</span><br><span class="line">	(*stats_counter)++;</span><br><span class="line">	stats-&gt;n_mask_hit +&#x3D; n_mask_hit;</span><br><span class="line">	u64_stats_update_end(&amp;stats-&gt;syncp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是ovs_vport_send的<font color="red">源代码</font>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">void ovs_vport_send(struct vport *vport, struct sk_buff *skb, u8 mac_proto)</span><br><span class="line">&#123;</span><br><span class="line">	int mtu &#x3D; vport-&gt;dev-&gt;mtu;</span><br><span class="line"></span><br><span class="line">	switch (vport-&gt;dev-&gt;type) &#123;</span><br><span class="line">	case ARPHRD_NONE:</span><br><span class="line">		if (mac_proto &#x3D;&#x3D; MAC_PROTO_ETHERNET) &#123;</span><br><span class="line">			skb_reset_network_header(skb);</span><br><span class="line">			skb_reset_mac_len(skb);</span><br><span class="line">			skb-&gt;protocol &#x3D; htons(ETH_P_TEB);</span><br><span class="line">		&#125; else if (mac_proto !&#x3D; MAC_PROTO_NONE) &#123;</span><br><span class="line">			WARN_ON_ONCE(1);</span><br><span class="line">			goto drop;</span><br><span class="line">		&#125;</span><br><span class="line">		break;</span><br><span class="line">	case ARPHRD_ETHER:</span><br><span class="line">		if (mac_proto !&#x3D; MAC_PROTO_ETHERNET)</span><br><span class="line">			goto drop;</span><br><span class="line">		break;</span><br><span class="line">	default:</span><br><span class="line">		goto drop;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if (unlikely(packet_length(skb, vport-&gt;dev) &gt; mtu &amp;&amp;</span><br><span class="line">		     !skb_is_gso(skb))) &#123;</span><br><span class="line">		net_warn_ratelimited(&quot;%s: dropped over-mtu packet: %d &gt; %d\n&quot;,</span><br><span class="line">				     vport-&gt;dev-&gt;name,</span><br><span class="line">				     packet_length(skb, vport-&gt;dev), mtu);</span><br><span class="line">		vport-&gt;dev-&gt;stats.tx_errors++;</span><br><span class="line">		goto drop;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	skb-&gt;dev &#x3D; vport-&gt;dev;</span><br><span class="line">	vport-&gt;ops-&gt;send(skb);</span><br><span class="line">	return;</span><br><span class="line"></span><br><span class="line">drop:</span><br><span class="line">	kfree_skb(skb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="OVS的流表查询调用"><a href="#OVS的流表查询调用" class="headerlink" title="OVS的流表查询调用"></a>OVS的流表查询调用</h2><p>如之前看到的，当packet进入ovs_dp_process_packet之后，ovs会调用<code>struct sw_flow *ovs_flow_tbl_lookup_stats</code>（位于datapath/flow_table.c）进行流表的查询，该函数的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">struct sw_flow *ovs_flow_tbl_lookup_stats(struct flow_table *tbl,</span><br><span class="line">					  const struct sw_flow_key *key,</span><br><span class="line">					  u32 skb_hash,</span><br><span class="line">					  u32 *n_mask_hit)</span><br><span class="line">&#123;</span><br><span class="line">	struct mask_array *ma &#x3D; rcu_dereference(tbl-&gt;mask_array);</span><br><span class="line">	struct table_instance *ti &#x3D; rcu_dereference(tbl-&gt;ti);</span><br><span class="line">	struct mask_cache_entry *entries, *ce;</span><br><span class="line">	struct sw_flow *flow;</span><br><span class="line">	u32 hash;</span><br><span class="line">	int seg;</span><br><span class="line"></span><br><span class="line">	*n_mask_hit &#x3D; 0;</span><br><span class="line">	if (unlikely(!skb_hash)) &#123;</span><br><span class="line">		u32 mask_index &#x3D; 0;</span><br><span class="line"></span><br><span class="line">		return flow_lookup(tbl, ti, ma, key, n_mask_hit, &amp;mask_index);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;* Pre and post recirulation flows usually have the same skb_hash</span><br><span class="line">	 * value. To avoid hash collisions, rehash the &#39;skb_hash&#39; with</span><br><span class="line">	 * &#39;recirc_id&#39;.  *&#x2F;</span><br><span class="line">	if (key-&gt;recirc_id)</span><br><span class="line">		skb_hash &#x3D; jhash_1word(skb_hash, key-&gt;recirc_id);</span><br><span class="line"></span><br><span class="line">	ce &#x3D; NULL;</span><br><span class="line">	hash &#x3D; skb_hash;</span><br><span class="line">	entries &#x3D; this_cpu_ptr(tbl-&gt;mask_cache);</span><br><span class="line"></span><br><span class="line">	&#x2F;* Find the cache entry &#39;ce&#39; to operate on. *&#x2F;</span><br><span class="line">	for (seg &#x3D; 0; seg &lt; MC_HASH_SEGS; seg++) &#123;</span><br><span class="line">		int index &#x3D; hash &amp; (MC_HASH_ENTRIES - 1);</span><br><span class="line">		struct mask_cache_entry *e;</span><br><span class="line"></span><br><span class="line">		e &#x3D; &amp;entries[index];</span><br><span class="line">		if (e-&gt;skb_hash &#x3D;&#x3D; skb_hash) &#123;</span><br><span class="line">			flow &#x3D; flow_lookup(tbl, ti, ma, key, n_mask_hit,</span><br><span class="line">					   &amp;e-&gt;mask_index);</span><br><span class="line">			if (!flow)</span><br><span class="line">				e-&gt;skb_hash &#x3D; 0;</span><br><span class="line">			return flow;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (!ce || e-&gt;skb_hash &lt; ce-&gt;skb_hash)</span><br><span class="line">			ce &#x3D; e;  &#x2F;* A better replacement cache candidate. *&#x2F;</span><br><span class="line"></span><br><span class="line">		hash &gt;&gt;&#x3D; MC_HASH_SHIFT;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;* Cache miss, do full lookup. *&#x2F;</span><br><span class="line">	flow &#x3D; flow_lookup(tbl, ti, ma, key, n_mask_hit, &amp;ce-&gt;mask_index);</span><br><span class="line">	if (flow)</span><br><span class="line">		ce-&gt;skb_hash &#x3D; skb_hash;</span><br><span class="line"></span><br><span class="line">	return flow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在该函数中会调用flow_lookup（位于datapath/flow_table.c）进行查找，代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">static struct sw_flow *flow_lookup(struct flow_table *tbl,</span><br><span class="line">				   struct table_instance *ti,</span><br><span class="line">				   const struct mask_array *ma,</span><br><span class="line">				   const struct sw_flow_key *key,</span><br><span class="line">				   u32 *n_mask_hit,</span><br><span class="line">				   u32 *index)</span><br><span class="line">&#123;</span><br><span class="line">	struct sw_flow_mask *mask;</span><br><span class="line">	struct sw_flow *flow;</span><br><span class="line">	int i;</span><br><span class="line"></span><br><span class="line">	if (*index &lt; ma-&gt;max) &#123;</span><br><span class="line">		mask &#x3D; rcu_dereference_ovsl(ma-&gt;masks[*index]);</span><br><span class="line">		if (mask) &#123;</span><br><span class="line">			flow &#x3D; masked_flow_lookup(ti, key, mask, n_mask_hit);</span><br><span class="line">			if (flow)</span><br><span class="line">				return flow;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	for (i &#x3D; 0; i &lt; ma-&gt;max; i++)  &#123;</span><br><span class="line"></span><br><span class="line">		if (i &#x3D;&#x3D; *index)</span><br><span class="line">			continue;</span><br><span class="line"></span><br><span class="line">		mask &#x3D; rcu_dereference_ovsl(ma-&gt;masks[i]);</span><br><span class="line">		if (!mask)</span><br><span class="line">			continue;</span><br><span class="line"></span><br><span class="line">		flow &#x3D; masked_flow_lookup(ti, key, mask, n_mask_hit);</span><br><span class="line">		if (flow) &#123; &#x2F;* Found *&#x2F;</span><br><span class="line">			*index &#x3D; i;</span><br><span class="line">			return flow;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在flow_lookup中有会调用masked_flow_lookup（位于datapath/flow_table.c），该函数的实现如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">static struct sw_flow *masked_flow_lookup(struct table_instance *ti,</span><br><span class="line">					  const struct sw_flow_key *unmasked,</span><br><span class="line">					  const struct sw_flow_mask *mask,</span><br><span class="line">					  u32 *n_mask_hit)</span><br><span class="line">&#123;</span><br><span class="line">	struct sw_flow *flow;</span><br><span class="line">	struct hlist_head *head;</span><br><span class="line">	u32 hash;</span><br><span class="line">	struct sw_flow_key masked_key;</span><br><span class="line"></span><br><span class="line">	ovs_flow_mask_key(&amp;masked_key, unmasked, false, mask);</span><br><span class="line">	hash &#x3D; flow_hash(&amp;masked_key, &amp;mask-&gt;range);</span><br><span class="line">	head &#x3D; find_bucket(ti, hash);</span><br><span class="line">	(*n_mask_hit)++;</span><br><span class="line">	hlist_for_each_entry_rcu(flow, head, flow_table.node[ti-&gt;node_ver]) &#123;</span><br><span class="line">		if (flow-&gt;mask &#x3D;&#x3D; mask &amp;&amp; flow-&gt;flow_table.hash &#x3D;&#x3D; hash &amp;&amp;</span><br><span class="line">		    flow_cmp_masked_key(flow, &amp;masked_key, &amp;mask-&gt;range))</span><br><span class="line">			return flow;</span><br><span class="line">	&#125;</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至此，与查询有关的函数调用则全部清晰明了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/28/ovs/" data-id="ckbymsov90000u4x1gr8ydjs4" data-title="ovs" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C++面试题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/20/C++%E9%9D%A2%E8%AF%95%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2020-06-20T04:01:41.562Z" itemprop="datePublished">2020-06-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/20/C++%E9%9D%A2%E8%AF%95%E9%A2%98/">C++面试题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="C-Fundamental"><a href="#C-Fundamental" class="headerlink" title="C++　Fundamental"></a>C++　Fundamental</h4><h5 id="vector内存管理"><a href="#vector内存管理" class="headerlink" title="vector内存管理"></a>vector内存管理</h5><h5 id="map底层实现"><a href="#map底层实现" class="headerlink" title="map底层实现"></a>map底层实现</h5><h5 id="进程间通信方式"><a href="#进程间通信方式" class="headerlink" title="进程间通信方式"></a>进程间通信方式</h5><ol>
<li>管道</li>
<li>FIFO</li>
<li>信号量</li>
<li>本地套接字</li>
</ol>
<h5 id="AVL树，B树，RB-Tree"><a href="#AVL树，B树，RB-Tree" class="headerlink" title="AVL树，B树，RB-Tree"></a>AVL树，B树，RB-Tree</h5><h5 id="new和malloc区别"><a href="#new和malloc区别" class="headerlink" title="new和malloc区别"></a>new和malloc区别</h5><h5 id="C-多态机制"><a href="#C-多态机制" class="headerlink" title="C++多态机制"></a>C++多态机制</h5><ol>
<li>运行时多态</li>
<li>编译时多态</li>
</ol>
<h5 id="C-虚函数底层实现"><a href="#C-虚函数底层实现" class="headerlink" title="C++虚函数底层实现"></a>C++虚函数底层实现</h5><h4 id="Algorithm-Part"><a href="#Algorithm-Part" class="headerlink" title="Algorithm Part"></a>Algorithm Part</h4><ol>
<li>在坐标轴上，从一个点到另一个点有多少种走法</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/20/C++%E9%9D%A2%E8%AF%95%E9%A2%98/" data-id="ckbq43c4z0000vkx18b0yfral" data-title="C++面试题" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-container-network" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/15/container-network/" class="article-date">
  <time class="dt-published" datetime="2020-06-15T09:36:51.007Z" itemprop="datePublished">2020-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/15/container-network/">Container Network</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="The-Container-Networking-Model-CNM"><a href="#The-Container-Networking-Model-CNM" class="headerlink" title="The Container Networking Model(CNM)"></a>The Container Networking Model(CNM)</h2><p>Container network model: <img src="/2020/06/15/container-network/cnm.PNG" alt="CNM"></p>
<h2 id="CNM-Constrcuts"><a href="#CNM-Constrcuts" class="headerlink" title="CNM Constrcuts"></a>CNM Constrcuts</h2><ol>
<li><strong>Sandbox</strong>: a sandbox contains configuration of a container’s network stack. This includes the management of container’s interfaces, routing table, and DNS settings.</li>
<li><strong>Endpoint</strong>: a endpoint joins a sandbox to a network.</li>
<li><strong>Network</strong>: an implementation of anNetwork could be linux bridge, a VLAN, etc. A network is a collection of endpoints that have connectivity between them.</li>
</ol>
<h2 id="CNM-Driver-Interfaces"><a href="#CNM-Driver-Interfaces" class="headerlink" title="CNM Driver Interfaces"></a>CNM Driver Interfaces</h2><p>CNM Drivers <img src="/2020/06/15/container-network/drivers.PNG" alt="CNM Drivers"><br>The container networking model provides two pluggable and open interfaces can be used by users and community. They <strong>Network Drivers</strong> and <strong>IPAM Drivers</strong>.</p>
<ol>
<li>Network Drivers: Docker Network Drivers provide the actual implementation that makes networks work. There are two broad type of CNM network drivers:<ul>
<li>Native Network Drivers: Native Network Drivers are a native part of the Docker Engine and are provided by Docker.</li>
<li>Remote Network Drivers: is created by community and other vendors. These drivers can be used to provide integration with incumbent software and hardware.</li>
</ul>
</li>
<li>IPAM Drivers: Docker has native IP Address Management(IPAM) Drivers that <em>provides default subnets</em> or IP addresses for the networks and endpoints if they are not specified.</li>
</ol>
<h2 id="Docker-Native-Network-Drivers"><a href="#Docker-Native-Network-Drivers" class="headerlink" title="Docker Native Network Drivers"></a>Docker Native Network Drivers</h2><p>The follow drivers are invoked by standard <code>docker network</code> commands. </p>
<ol>
<li>Host: container will use the network stack of host. There is no namespace speration, all interfaces on host can be used directly by containers. The container behaves like process on the host. We should prevent port conflicts</li>
<li>Bridge: create linux bridge on host, containers on bridge can communicate with each other. External access to containers can also be configured through <code>bridge</code> driver.</li>
<li>Overlay: create overlay network supports multi-host networks. It use a combination of <code>local Linux Bridges</code> and <code>VXLAN</code>.</li>
<li>MACVLAN:</li>
</ol>
<h2 id="Linux-Network-Fundmentals"><a href="#Linux-Network-Fundmentals" class="headerlink" title="Linux Network Fundmentals"></a>Linux Network Fundmentals</h2><ol>
<li>The Linux Bridge: is a Layer 2 device and forwardd traffic based on MAC addresses which it learns  dynamically by inspecting traffic.</li>
<li>Network Namespace: is an isolated network stack in the kernek with its own interfaces, routes, and firewall rules. Namespces ensure two containers on same host aren’t able to communicate with each other. CNM network drivers implement separate namespaces for each containers.</li>
<li>Virtual Ethernet Devices: <strong>veth</strong> is Linux networking interface that acts as a connecting wire between two network namespaces.</li>
<li>iptables: is a native packet filtering system. The native Docker network drivers utilize iptables extensively to segment network traffic, provide host port mapping, and to mark traffic for load balancing decisions.</li>
</ol>
<h2 id="Container-Overlay-Network"><a href="#Container-Overlay-Network" class="headerlink" title="Container Overlay Network"></a>Container Overlay Network</h2><p>A key component in providing portability for distributed containerized applications</p>
<h2 id="Docker-跨主机连接"><a href="#Docker-跨主机连接" class="headerlink" title="Docker 跨主机连接"></a>Docker 跨主机连接</h2><ol>
<li>bridge<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.修改 &#x2F;etc&#x2F;network&#x2F;interfaces文件</span><br><span class="line">auto br0</span><br><span class="line">iface br0 inet static</span><br><span class="line">address 10.211.55.3</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">gateway 10.211.55.1</span><br><span class="line">bridge_ports eth0</span><br><span class="line">2. &#x2F;etc&#x2F;default&#x2F;docker</span><br><span class="line">DOCKER_OPTS&#x3D;&quot;-b br0 --fixed-cidr&#x3D;&quot;10.211.55.128&#x2F;26&quot;</span><br></pre></td></tr></table></figure></li>
<li>openvswitch</li>
<li>weave</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/15/container-network/" data-id="ckbq43c540001vkx1b90pdr74" data-title="Container Network" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="pos-Tunnel" class="h-entry article article-type-pos" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/13/Tunnel/" class="article-date">
  <time class="dt-published" datetime="2020-06-13T15:40:18.000Z" itemprop="datePublished">2020-06-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/13/Tunnel/">隧道协议那些事</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="TUNNEL-PROTOCOL"><a href="#TUNNEL-PROTOCOL" class="headerlink" title="TUNNEL PROTOCOL"></a>TUNNEL PROTOCOL</h2><h3 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h3><h3 id="IPSEC"><a href="#IPSEC" class="headerlink" title="IPSEC"></a>IPSEC</h3><h3 id="GRE"><a href="#GRE" class="headerlink" title="GRE"></a>GRE</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/13/Tunnel/" data-id="ckbq43c550002vkx143tzaahn" data-title="隧道协议那些事" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VLAN/" rel="tag">VLAN</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/13/hello-world/" class="article-date">
  <time class="dt-published" datetime="2020-06-13T15:12:32.489Z" itemprop="datePublished">2020-06-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/13/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/13/hello-world/" data-id="ckbq43c5m0005vkx1ctksagfc" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/VLAN/" rel="tag">VLAN</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/VLAN/" style="font-size: 10px;">VLAN</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/28/multihost_container/">multihost_container</a>
          </li>
        
          <li>
            <a href="/2020/06/28/ovs/">ovs</a>
          </li>
        
          <li>
            <a href="/2020/06/20/C++%E9%9D%A2%E8%AF%95%E9%A2%98/">C++面试题</a>
          </li>
        
          <li>
            <a href="/2020/06/15/container-network/">Container Network</a>
          </li>
        
          <li>
            <a href="/2020/06/13/Tunnel/">隧道协议那些事</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>